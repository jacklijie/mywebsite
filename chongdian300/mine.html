<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="yes" name="apple-touch-fullscreen">
    <meta content="telephone=no,email=no" name="format-detection">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>充电300秒</title>
    <link rel="stylesheet" href="/dist/css/chongdian300.css">
</head>

<body>
    <section class="app-box">
        <div class="mine-app share-app">
            <div class="app-header">
                <img class="shouting" src="dist/img/shouting.png" alt="">
                <p>{{myInfo.NOText}}</p>
                <!-- <p>您有权继续收听X+N+Y-M期</p> -->
            </div>
            <div class="share-con">
                <h4>分享</h4>
                <p>{{myInfo.ShareNOText}}</p>
                <h4>购买</h4>
                <p>{{myInfo.PayNOText}}</p>
                <h4>获赠</h4>
                <p>{{myInfo.FreeNOText}}</p>
                <h4>已听</h4>
                <p>{{myInfo.ListenNOText}}</p>
                <span @click="back">返回</span>
            </div>
        </div>
        <footer class="app-footer"><span>听得懂 用得着</span></footer>
    </section>
    <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
    <script type="text/javascript" src="dist/js/vue.min.js"></script>
    <script type="text/javascript" src="dist/js/zepto.js"></script>
    <script type="text/javascript" src="dist/js/chongdian300.js"></script>
    <script type="text/javascript">
        window.onload = function(){
            mineReady();
            try{
                //初始化微信jsk sdk配置url 请严格按照微信sdk标准返回结果
                Q_UTILS.WX_SHARE.initParams.url = Q_UTILS.CONSTANTS.URL.OAUTH;
                Q_UTILS.WX_SHARE.initParams.isStringify = true;
                //自定义请求参数
                Q_UTILS.WX_SHARE.initParams.params = {
                    WX_flag : 4,
                    action : 'WXconfig',
                    rd_session : Q_UTILS.CONSTANTS.RD_SESSION
                };
                //            Q_UTILS.WX_SHARE.initParams.method = 'get';//默认是post
                //初始化
                Q_UTILS.WX_SHARE.init();
            } catch (e) {
                console.log(e);
            }
        };
        try{
            wx.ready(function(){
                var request = {
                    action : 'FM300Shareconfig',
                    rd_session : Q_UTILS.CONSTANTS.RD_SESSION,
                    WX_flag : 5,
                    para : ''
                };
                $.post(Q_UTILS.CONSTANTS.URL.OAUTH, JSON.stringify(request), function(response){
                    response = JSON.parse(response).WXShareSource[0];
                    //微信分享描述
                    Q_UTILS.WX_SHARE.shareObj.desc = response.descr;
                    //好友圈分享标题
                    Q_UTILS.WX_SHARE.shareObj.timelineTitle = response.title;
                    //微信分享给朋友标题
                    Q_UTILS.WX_SHARE.shareObj.friendTitle = Q_UTILS.WX_SHARE.shareObj.timelineTitle;
                    //分享链接
                    if(response.shareLink != undefined){
                        Q_UTILS.WX_SHARE.shareObj.shareLink = response.shareLink;
                    } else {
                        Q_UTILS.WX_SHARE.shareObj.shareLink = 'https://www.chongdianshijian.com/questionGame/oauth.html';
                    }
                    //分享大图标
                    Q_UTILS.WX_SHARE.shareObj.shareBigImg = response.imgUrl;
                    //分享图标
                    Q_UTILS.WX_SHARE.shareObj.shareImg = response.imgUrl;
                    //分享成功回掉
                    Q_UTILS.WX_SHARE.shareObj.shareSuccess = function(){
                        var shareRequest = {
                            action : 'saveShare',
                            rd_session : Q_UTILS.CONSTANTS.RD_SESSION,
                            WX_flag : 4,
                            para : 'GamePage'
                        };
                        $.post(Q_UTILS.CONSTANTS.URL.OAUTH, JSON.stringify(shareRequest), function(shareSuccessResponse){
                            //shareSuccessResponse = JSON.parse(shareSuccessResponse);
                        });
                    };
                    //取消分享回掉
                    Q_UTILS.WX_SHARE.shareObj.shareCancel = function(){

                    };
                    //此行不可注释
                    Q_UTILS.WX_SHARE.onReady();
                });

            });
        } catch (e) {
        }
    </script>
</body>

</html>
